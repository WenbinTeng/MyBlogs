---
title: fpga-axi-transfer
date: 2025-05-02 08:49:06
tags:
typora-root-url: fpga-axi-transfer
---

# AXI 总线学习 (4) - 传输特性

在 AXI4 协议中，为了适应现代 SoC 中复杂且高效的数据传输需求，除了基本的握手机制和通道定义外，还引入了一系列高级传输特性，如突发传输（Burst）、超前传输（Outstanding）、通道交织（Interleaving）、窄传输（Narrow）以及非对齐传输（Unaligned）。本文将介绍这些 AXI4 传输特性。



### 1. Burst

AXI4 支持**突发传输（Burst）**，进行一次地址握手之后可以进行多次数据传输，从而减少总线开销、提高带宽利用率。更具体地说，在 Burst 读操作中，Manager 只需要发送一个读起始地址，Subordinate 就根据这个起始地址与响应的地址增长规则自动进行地址计算，将对应的数据发送给 Manager。类似地，在 Burst 写操作中，Manager 只需要发送一个写起始地址，Subordinate 根据传输的长度将数据传输到对应的缓存中。因此，只需要在地址通道中进行一次握手就可以完成连续的数据传输，避免了系统总线的占用。

<img src="burst_read.png" style="zoom: 80%;" />

<img src="burst_write.png" style="zoom: 80%;" />

在 AXI4 协议中，可以在通道中传输 `ARBURST` 和 `AWBURST` 信号来指定 Burst 的地址增长类型：

- **地址固定**（FIXED，AxBURST=0b00）：会多次访问从设备中相同地址的数据，常用于 FIFO 场景中。
  - 每个数据的地址都是固定的。
  - 一次事务中最多可以进行 16 次传输。
- **地址线性递增**（INCR，AxBURST=0b01）：可以配置固定长度的地址递增和非固定长度的地址递增，常用于 Memory 访问的场景中。
  - 每个数据的地址都是上一个数据的地址加上数据宽度。例如，若 `ARSIZE` （读数据宽度的对数）为 2、`ARLEN` （读数据个数-1）为 3，那么从设备将会返回四个地址的数据：`ARADDR`，`ARADDR+4`，`ARADDR+8`，`ARADDR+12`。
  - 一次事务中的传输次数必须为 2、4、8 或 16。
  - 不支持提前结束。
- **地址回绕递增**（WRAP，AxBURST=0b10）：地址按照指定的数据宽度进行递增，当到达一个边界后，从初始地址开始的字节对齐位置继续递增，常用于 Cache 访问的场景中。
  - 每个数据的地址都是上一个数据的地址加上数据宽度，如果达到边界，则从初始地址开始，即 $(len+1) \times 2^{size}$。例如，若 `ARSIZE` （读数据宽度的对数）为 2、`ARLEN` （读数据个数-1）为 3、初始地址 `ARADDR` 为 0x000C。那么传输长度为 16，对齐地址为 0x0000，一共需要传输 4 个地址的数据：`0x000C`，`0x0000`，`0x0004`，`0x0008`。
  - 初始地址必须与每次传输的大小对齐。
  - 一次事务中的传输次数必须为 2、4、8 或 16。
  - 不支持提前结束。

**优点**：提升单个传输事务的效率，释放地址通道。



### 2. Outstanding

AXI4 支持多个未完成的事务同时进行传输，即 Manager 可以在一个读事务或写事务未完成时，就继续发起新的事务，减少 Manager 的等待。这是因为 AXI 通道是分离的，Manager 无需等待数据通道和响应通道中的传输完成，就可以在地址通道中进行新的事务的握手。注意，在系统设计上要注意 Manager 侧的读缓存与 Subordinate 侧的写缓存大小需求，避免出现无法处理大量数据而出现的系统反压。







### 3. Out-of-Order
